Index: texk/web2c/pdftexdir/utils.c
===================================================================
--- texk/web2c/pdftexdir/utils.c	(revision 26897)
+++ texk/web2c/pdftexdir/utils.c	(working copy)
@@ -25,11 +25,7 @@
 #else
 #include <sysexits.h>
 #endif
-#ifdef __MINGW32__
-#include <regex/regex.h>
-#else
 #include <regex.h>
-#endif
 #include <kpathsea/c-proto.h>
 #include <kpathsea/c-stat.h>
 #include <kpathsea/c-fopen.h>
Index: texk/web2c/pdftexdir/ChangeLog
===================================================================
--- texk/web2c/pdftexdir/ChangeLog	(revision 26897)
+++ texk/web2c/pdftexdir/ChangeLog	(working copy)
@@ -1,3 +1,14 @@
+2012-06-21  Peter Breitenlohner  <peb@mppmu.mpg.de>
+
+	* pdftosrc.cc: Use XRef::getNumObjects instead of XRef::getSize,
+	required for poppler >= 0.19.0.
+
+2012-06-15  Peter Breitenlohner  <peb@mppmu.mpg.de>
+
+	* utils.c [__MINGW32__]: #include <regex.h> as for Unix instead
+	of <regex/regex.h>.
+	* am/libpdftex.am (libpdftex_a_CPPFLAGS): Change accordingly.
+
 2012-05-20  Thanh Han The  <thanh@river-valley.org>
 
 	* pdftex.defines (get/setimagegroupref): these replace imagegroupref.
Index: texk/web2c/pdftexdir/am/libpdftex.am
===================================================================
--- texk/web2c/pdftexdir/am/libpdftex.am	(revision 26897)
+++ texk/web2c/pdftexdir/am/libpdftex.am	(working copy)
@@ -1,13 +1,13 @@
 ## texk/web2c/pdftexdir/am/libpdftex.am: Makefile fragment for libpdftex.
 ##
-## Copyright (C) 2009-2011 Peter Breitenlohner <tex-live@tug.org>
+## Copyright (C) 2009-2012 Peter Breitenlohner <tex-live@tug.org>
 ## You may freely use, modify and/or distribute this file.
 
 ## libpdftex
 ##
 EXTRA_LIBRARIES += libpdftex.a
 
-libpdftex_a_CPPFLAGS = $(pdftex_cppflags)
+libpdftex_a_CPPFLAGS = $(REGEX_INCLUDES) $(pdftex_cppflags)
 libpdftex_a_CXXFLAGS = # $(WARNING_CXXFLAGS)
 
 libpdftex_a_SOURCES = \
@@ -41,6 +41,7 @@
 	pdftexdir/writezip.c
 
 if MINGW32
+REGEX_INCLUDES = -I$(srcdir)/pdftexdir/regex
 libpdftex_a_SOURCES += \
 	pdftexdir/regex/regex.c \
 	pdftexdir/regex/regex.h
Index: texk/web2c/pdftexdir/pdftosrc.cc
===================================================================
--- texk/web2c/pdftexdir/pdftosrc.cc	(revision 26897)
+++ texk/web2c/pdftexdir/pdftosrc.cc	(working copy)
@@ -134,7 +134,11 @@
         exit(1);
     }
     if (extract_xref_table) {
+#ifdef POPPLER_VERSION
+        int size = xref->getNumObjects();
+#else
         int size = xref->getSize();
+#endif
         int i;
         for (i = 0; i < size; i++) {
             if (xref->getEntry(i)->offset == 0xffffffff)
